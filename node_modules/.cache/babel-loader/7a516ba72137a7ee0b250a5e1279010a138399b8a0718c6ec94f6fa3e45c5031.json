{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import Navbar from'./Navbar';import{Link}from'react-router-dom';import'./Leads.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Leads=()=>{const[contactValue,setContactValue]=useState('');const[fieldValue,setFieldValue]=useState('');const[nameValue,setNameValue]=useState('');const[addressValue,setAddressValue]=useState('');const[docTypeValue,setDocTypeValue]=useState('');const[formVisible,setFormVisible]=useState(false);const[leadsData,setLeadsData]=useState([]);// Fetch leads data from the backend when the component mounts\nuseEffect(()=>{const fetchLeadsData=async()=>{try{const response=await axios.get('http://192.168.2.202:5000/api/leads');setLeadsData(response.data);}catch(error){console.error('Error fetching leads:',error);}};fetchLeadsData();},[]);const handleSubmit=async e=>{e.preventDefault();const newLead={contact:contactValue,field:fieldValue,name:nameValue,address:addressValue,docType:docTypeValue};try{const response=await axios.post('http://192.168.2.202:5000/api/leads',newLead);console.log('Lead added:',response.data);// Clear form fields after submission\nsetContactValue('');setFieldValue('');setNameValue('');setAddressValue('');setDocTypeValue('');setFormVisible(false);// Hide the form\n// Re-fetch leads data to update the table\nconst updatedLeads=await axios.get('http://192.168.2.202:5000/api/leads');setLeadsData(updatedLeads.data);}catch(error){console.error('Error adding lead:',error.response?error.response.data:error.message);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Leads\"}),/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFormVisible(true),children:\"Create Lead\"}),formVisible&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"lead-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Contact\",value:contactValue,onChange:e=>setContactValue(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Field\",value:fieldValue,onChange:e=>setFieldValue(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:nameValue,onChange:e=>setNameValue(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Address\",value:addressValue,onChange:e=>setAddressValue(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Doc Type\",value:docTypeValue,onChange:e=>setDocTypeValue(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Lead\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setFormVisible(false),children:\"Cancel\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"leads-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Contact\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Field\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Doc Type\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:leadsData.map((lead,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:lead.contact}),/*#__PURE__*/_jsx(\"td\",{children:lead.field}),/*#__PURE__*/_jsx(\"td\",{children:lead.name}),/*#__PURE__*/_jsx(\"td\",{children:lead.address}),/*#__PURE__*/_jsx(\"td\",{children:lead.docType})]},index))})]}),/*#__PURE__*/_jsx(Link,{to:\"/home\",children:/*#__PURE__*/_jsx(\"button\",{className:\"home-button\",children:\"Home page\"})})]});};export default Leads;","map":{"version":3,"names":["React","useEffect","useState","axios","Navbar","Link","jsx","_jsx","jsxs","_jsxs","Leads","contactValue","setContactValue","fieldValue","setFieldValue","nameValue","setNameValue","addressValue","setAddressValue","docTypeValue","setDocTypeValue","formVisible","setFormVisible","leadsData","setLeadsData","fetchLeadsData","response","get","data","error","console","handleSubmit","e","preventDefault","newLead","contact","field","name","address","docType","post","log","updatedLeads","message","children","onClick","onSubmit","className","type","placeholder","value","onChange","target","required","map","lead","index","to"],"sources":["/Users/at-mac07/Documents/github/crmfront/src/Leads.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Navbar from './Navbar';\nimport { Link } from 'react-router-dom';\nimport './Leads.css';\n\nconst Leads = () => {\n  const [contactValue, setContactValue] = useState('');\n  const [fieldValue, setFieldValue] = useState('');\n  const [nameValue, setNameValue] = useState('');\n  const [addressValue, setAddressValue] = useState('');\n  const [docTypeValue, setDocTypeValue] = useState('');\n  const [formVisible, setFormVisible] = useState(false);\n  const [leadsData, setLeadsData] = useState([]);\n\n  // Fetch leads data from the backend when the component mounts\n  useEffect(() => {\n    const fetchLeadsData = async () => {\n      try {\n        const response = await axios.get('http://192.168.2.202:5000/api/leads');\n        setLeadsData(response.data);\n      } catch (error) {\n        console.error('Error fetching leads:', error);\n      }\n    };\n\n    fetchLeadsData();\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const newLead = {\n      contact: contactValue,\n      field: fieldValue,\n      name: nameValue,\n      address: addressValue,\n      docType: docTypeValue,\n    };\n\n    try {\n      const response = await axios.post('http://192.168.2.202:5000/api/leads', newLead);\n      console.log('Lead added:', response.data);\n      // Clear form fields after submission\n      setContactValue('');\n      setFieldValue('');\n      setNameValue('');\n      setAddressValue('');\n      setDocTypeValue('');\n      setFormVisible(false); // Hide the form\n      // Re-fetch leads data to update the table\n      const updatedLeads = await axios.get('http://192.168.2.202:5000/api/leads');\n      setLeadsData(updatedLeads.data);\n    } catch (error) {\n      console.error('Error adding lead:', error.response ? error.response.data : error.message);\n    }\n  };\n\n  return (\n    <div>\n      <h1>Leads</h1>\n      <Navbar />\n\n      <button onClick={() => setFormVisible(true)}>Create Lead</button>\n\n      {formVisible && (\n        <form onSubmit={handleSubmit} className=\"lead-form\">\n          <input\n            type=\"text\"\n            placeholder=\"Contact\"\n            value={contactValue}\n            onChange={(e) => setContactValue(e.target.value)}\n            required\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Field\"\n            value={fieldValue}\n            onChange={(e) => setFieldValue(e.target.value)}\n            required\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Name\"\n            value={nameValue}\n            onChange={(e) => setNameValue(e.target.value)}\n            required\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Address\"\n            value={addressValue}\n            onChange={(e) => setAddressValue(e.target.value)}\n            required\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Doc Type\"\n            value={docTypeValue}\n            onChange={(e) => setDocTypeValue(e.target.value)}\n            required\n          />\n          <button type=\"submit\">Add Lead</button>\n          <button type=\"button\" onClick={() => setFormVisible(false)}>Cancel</button>\n        </form>\n      )}\n\n      <table className=\"leads-table\">\n        <thead>\n          <tr>\n            <th>Contact</th>\n            <th>Field</th>\n            <th>Name</th>\n            <th>Address</th>\n            <th>Doc Type</th>\n          </tr>\n        </thead>\n        <tbody>\n          {leadsData.map((lead, index) => (\n            <tr key={index}>\n              <td>{lead.contact}</td>\n              <td>{lead.field}</td>\n              <td>{lead.name}</td>\n              <td>{lead.address}</td>\n              <td>{lead.docType}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      <Link to=\"/home\">\n        <button className=\"home-button\">Home page</button>\n      </Link>\n\n    </div>\n  );\n};\n\nexport default Leads;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}